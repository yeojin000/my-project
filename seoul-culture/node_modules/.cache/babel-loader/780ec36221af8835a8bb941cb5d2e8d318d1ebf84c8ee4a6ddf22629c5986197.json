{"ast":null,"code":"var _jsxFileName = \"C:\\\\my-project\\\\seoul-culture\\\\src\\\\pages\\\\Map.jsx\",\n  _s = $RefreshSig$();\nconsole.log('KAKAO KEY:', process.env.REACT_APP_KAKAO_MAP_KEY);\n\n// src/pages/Map.jsx\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\n\n/* === 상단 필터 옵션 그대로 사용 === */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CATEGORIES = [\"공연\", \"전시\", \"교육/체험\", \"기타\"];\nconst AREAS = [\"전체\", \"종로구\", \"마포구\", \"서초구\", \"성동구\", \"용산구\"];\nconst DATES = [\"전체\", \"오늘\", \"이번 주\", \"이번 달\"];\n\n/* === 샘플 이벤트 (실제 API 연동 전 임시 표시용) ===\r\n   - Kakao 지도는 위/경도 좌표가 필요해요.\r\n   - 각 구에 임의의 좌표(핵심 랜드마크 주변)를 넣어뒀습니다.\r\n*/\nconst SAMPLE_EVENTS = [{\n  id: 1,\n  title: \"서울시립미술관 특별전\",\n  category: \"전시\",\n  place: \"서울시립미술관 서소문본관\",\n  area: \"중구\",\n  // 중구는 필터 목록에 없으니 '전체' 선택 시 보이고, 필요하면 AREAS에 '중구' 추가 가능\n  lat: 37.5659,\n  lng: 126.9753,\n  dateStart: \"2025-11-05\",\n  dateEnd: \"2025-12-10\"\n}, {\n  id: 2,\n  title: \"종로 낭독 콘서트\",\n  category: \"공연\",\n  place: \"종로구민회관\",\n  area: \"종로구\",\n  lat: 37.5720,\n  lng: 126.9813,\n  dateStart: \"2025-11-10\",\n  dateEnd: \"2025-11-10\"\n}, {\n  id: 3,\n  title: \"마포 문화 체험 데이\",\n  category: \"교육/체험\",\n  place: \"마포 문화비축기지\",\n  area: \"마포구\",\n  lat: 37.5693,\n  lng: 126.8947,\n  dateStart: \"2025-11-08\",\n  dateEnd: \"2025-11-30\"\n}, {\n  id: 4,\n  title: \"서초 가을 클래식\",\n  category: \"공연\",\n  place: \"예술의전당\",\n  area: \"서초구\",\n  lat: 37.4799,\n  lng: 127.0146,\n  dateStart: \"2025-11-15\",\n  dateEnd: \"2025-11-15\"\n}, {\n  id: 5,\n  title: \"성수 갤러리 기획전\",\n  category: \"전시\",\n  place: \"성수동 갤러리\",\n  area: \"성동구\",\n  lat: 37.5435,\n  lng: 127.0566,\n  dateStart: \"2025-11-01\",\n  dateEnd: \"2025-11-30\"\n}, {\n  id: 6,\n  title: \"용산 가족 과학 체험\",\n  category: \"교육/체험\",\n  place: \"국립중앙박물관 어린이박물관\",\n  area: \"용산구\",\n  lat: 37.5230,\n  lng: 126.9800,\n  dateStart: \"2025-11-09\",\n  dateEnd: \"2025-11-20\"\n}, {\n  id: 7,\n  title: \"한강 야시장\",\n  category: \"기타\",\n  place: \"여의도 한강공원\",\n  area: \"영등포구\",\n  lat: 37.5271,\n  lng: 126.9327,\n  dateStart: \"2025-11-01\",\n  dateEnd: \"2025-11-30\"\n}];\n\n/* 날짜 필터 유틸 */\nconst inDateFilter = (event, selected) => {\n  if (selected === \"전체\") return true;\n  const today = new Date(); // 로컬(Asia/Seoul) 기준\n  const start = new Date(event.dateStart + \"T00:00:00\");\n  const end = new Date(event.dateEnd + \"T23:59:59\");\n  if (selected === \"오늘\") {\n    const y = today.getFullYear();\n    const m = today.getMonth();\n    const d = today.getDate();\n    const todayStart = new Date(y, m, d, 0, 0, 0);\n    const todayEnd = new Date(y, m, d, 23, 59, 59);\n    return end >= todayStart && start <= todayEnd;\n  }\n  if (selected === \"이번 주\") {\n    // 월요일 시작, 일요일 끝(한국 기준)\n    const day = today.getDay(); // 0:일 ~ 6:토\n    const diffToMonday = day === 0 ? -6 : 1 - day; // 오늘에서 월요일까지의 차이\n    const monday = new Date(today);\n    monday.setDate(today.getDate() + diffToMonday);\n    monday.setHours(0, 0, 0, 0);\n    const sunday = new Date(monday);\n    sunday.setDate(monday.getDate() + 6);\n    sunday.setHours(23, 59, 59, 999);\n    return end >= monday && start <= sunday;\n  }\n  if (selected === \"이번 달\") {\n    const y = today.getFullYear();\n    const m = today.getMonth();\n    const monthStart = new Date(y, m, 1, 0, 0, 0);\n    const monthEnd = new Date(y, m + 1, 0, 23, 59, 59);\n    return end >= monthStart && start <= monthEnd;\n  }\n  return true;\n};\nexport default function MapPage() {\n  _s();\n  const [category, setCategory] = useState(\"\");\n  const [area, setArea] = useState(\"전체\");\n  const [date, setDate] = useState(\"전체\");\n  const [selectedEvent, setSelectedEvent] = useState(null);\n  const mapRef = useRef(null); // div DOM ref\n  const kakaoMapRef = useRef(null); // kakao.maps.Map 인스턴스\n  const markersRef = useRef([]); // 생성한 마커들\n  const infoRef = useRef([]); // 생성한 인포윈도우들\n\n  /* 필터링된 이벤트 */\n  const filtered = useMemo(() => {\n    return SAMPLE_EVENTS.filter(e => {\n      const byCategory = category ? e.category === category : true;\n      const byArea = area === \"전체\" ? true : e.area === area;\n      const byDate = inDateFilter(e, date);\n      return byCategory && byArea && byDate;\n    });\n  }, [category, area, date]);\n\n  /* Kakao SDK 로더 */\n  const loadKakao = () => new Promise((resolve, reject) => {\n    if (window.kakao && window.kakao.maps) {\n      resolve(window.kakao);\n      return;\n    }\n    const appkey = process.env.REACT_APP_KAKAO_MAP_KEY;\n    if (!appkey) {\n      reject(new Error(\"환경변수 REACT_APP_KAKAO_MAP_KEY 가 설정되어 있지 않습니다.\"));\n      return;\n    }\n    const script = document.createElement(\"script\");\n    script.src = `https://dapi.kakao.com/v2/maps/sdk.js?appkey=${appkey}&libraries=services&autoload=false`;\n    script.async = true;\n    script.onload = () => {\n      window.kakao.maps.load(() => resolve(window.kakao));\n    };\n    script.onerror = reject;\n    document.head.appendChild(script);\n  });\n\n  /* 지도 초기화 (최초 1회) */\n  useEffect(() => {\n    let cancelled = false;\n    const init = async () => {\n      try {\n        const kakao = await loadKakao();\n        if (cancelled) return;\n        const center = new kakao.maps.LatLng(37.5665, 126.9780); // 시청 중심\n        const options = {\n          center,\n          level: 7\n        };\n        const map = new kakao.maps.Map(mapRef.current, options);\n        kakaoMapRef.current = map;\n\n        // 컨테이너 표시 크기 바뀔 때 리사이즈 대응\n        const handleResize = () => {\n          const map = kakaoMapRef.current;\n          if (!map) return;\n          const currentCenter = map.getCenter();\n          setTimeout(() => {\n            kakao.maps.event.trigger(map, \"resize\");\n            map.setCenter(currentCenter);\n          }, 0);\n        };\n        window.addEventListener(\"resize\", handleResize);\n\n        // cleanup\n        return () => {\n          window.removeEventListener(\"resize\", handleResize);\n        };\n      } catch (e) {\n        console.error(e);\n      }\n    };\n    const cleanup = init();\n    return () => {\n      cancelled = true;\n      if (typeof cleanup === \"function\") cleanup();\n    };\n  }, []);\n\n  /* 마커/인포윈도우 렌더링 (필터 변경 시 갱신) */\n  useEffect(() => {\n    const kakao = window.kakao;\n    const map = kakaoMapRef.current;\n    if (!kakao || !map) return;\n\n    // 이전 마커/인포윈도우 제거\n    markersRef.current.forEach(m => m.setMap(null));\n    infoRef.current.forEach(i => i.close());\n    markersRef.current = [];\n    infoRef.current = [];\n    if (filtered.length === 0) return;\n\n    // bounds로 화면에 맞게\n    const bounds = new kakao.maps.LatLngBounds();\n    filtered.forEach(ev => {\n      const pos = new kakao.maps.LatLng(ev.lat, ev.lng);\n      bounds.extend(pos);\n      const marker = new kakao.maps.Marker({\n        position: pos,\n        map,\n        title: ev.title\n      });\n      const iwContent = `\n        <div style=\"padding:8px 10px; font-size:12px;\">\n          <div style=\"font-weight:600; margin-bottom:4px;\">${ev.title}</div>\n          <div style=\"color:#666;\">${ev.place}</div>\n          <div style=\"color:#888; margin-top:2px;\">${ev.dateStart} ~ ${ev.dateEnd}</div>\n        </div>\n      `;\n      const infowindow = new kakao.maps.InfoWindow({\n        content: iwContent\n      });\n      kakao.maps.event.addListener(marker, \"click\", () => {\n        // 열려있는 인포윈도우 닫고 클릭한 것만 열기\n        infoRef.current.forEach(i => i.close());\n        infowindow.open(map, marker);\n        setSelectedEvent({\n          id: ev.id,\n          title: ev.title,\n          place: ev.place,\n          date: `${ev.dateStart} ~ ${ev.dateEnd}`,\n          area: ev.area,\n          category: ev.category\n        });\n      });\n      markersRef.current.push(marker);\n      infoRef.current.push(infowindow);\n    });\n\n    // 선택된 이벤트가 필터로 사라졌으면 리셋\n    if (selectedEvent && !filtered.some(e => e.id === selectedEvent.id)) {\n      setSelectedEvent(null);\n    }\n\n    // 마커가 하나면 살짝 확대, 여러 개면 bounds로 맞춤\n    if (filtered.length === 1) {\n      map.setLevel(5);\n      map.setCenter(new kakao.maps.LatLng(filtered[0].lat, filtered[0].lng));\n    } else {\n      map.setBounds(bounds, 40, 40, 40, 40); // padding\n    }\n  }, [filtered, selectedEvent]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-white px-6 py-8 max-w-7xl mx-auto\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-12 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold mb-2\",\n          children: \"\\uCE74\\uD14C\\uACE0\\uB9AC \\uD544\\uD130\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-1 mb-6\",\n          children: [CATEGORIES.map(c => /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center gap-2 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"category\",\n              value: c,\n              checked: category === c,\n              onChange: () => setCategory(c)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 17\n            }, this), c]\n          }, c, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setCategory(\"\"),\n            className: \"text-xs underline text-gray-600 mt-1 self-start\",\n            children: \"\\uC120\\uD0DD \\uD574\\uC81C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold mb-2\",\n          children: \"\\uC9C0\\uC5ED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: area,\n          onChange: e => setArea(e.target.value),\n          className: \"border rounded px-2 py-1 w-full mb-6\",\n          children: AREAS.map(a => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: a,\n            children: a\n          }, a, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold mb-2\",\n          children: \"\\uB0A0\\uC9DC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: date,\n          onChange: e => setDate(e.target.value),\n          className: \"border rounded px-2 py-1 w-full\",\n          children: DATES.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: d,\n            children: d\n          }, d, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: mapRef,\n          className: \"border rounded-lg w-full aspect-square\"\n          // aspect-square로 정사각형. 필요하면 h-[600px] 등 고정 높이로 교체 가능\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-3 border rounded-lg p-4 bg-gray-50\",\n        children: selectedEvent ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs inline-flex items-center rounded-full bg-gray-200 px-2 py-0.5 mb-2\",\n            children: [selectedEvent.category, \" \\xB7 \", selectedEvent.area]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-bold text-lg mb-1\",\n            children: selectedEvent.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-2\",\n            children: selectedEvent.place\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: selectedEvent.date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"mt-4 text-sm underline text-blue-600\",\n            onClick: () => setSelectedEvent(null),\n            children: \"\\uC120\\uD0DD \\uD574\\uC81C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-500 text-sm text-center mt-20\",\n          children: \"\\uC9C0\\uB3C4\\uC758 \\uD45C\\uC2DC\\uB41C \\uD589\\uC0AC \\uC911 \\uD558\\uB098\\uB97C \\uD074\\uB9AD\\uD558\\uBA74 \\uC0C1\\uC138\\uC815\\uBCF4\\uAC00 \\uC5EC\\uAE30\\uC5D0 \\uD45C\\uC2DC\\uB429\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 297,\n    columnNumber: 5\n  }, this);\n}\n_s(MapPage, \"FCkUEJaiRb8CNENWTTeBiYGwZL0=\");\n_c = MapPage;\nvar _c;\n$RefreshReg$(_c, \"MapPage\");","map":{"version":3,"names":["console","log","process","env","REACT_APP_KAKAO_MAP_KEY","React","useEffect","useMemo","useRef","useState","jsxDEV","_jsxDEV","CATEGORIES","AREAS","DATES","SAMPLE_EVENTS","id","title","category","place","area","lat","lng","dateStart","dateEnd","inDateFilter","event","selected","today","Date","start","end","y","getFullYear","m","getMonth","d","getDate","todayStart","todayEnd","day","getDay","diffToMonday","monday","setDate","setHours","sunday","monthStart","monthEnd","MapPage","_s","setCategory","setArea","date","selectedEvent","setSelectedEvent","mapRef","kakaoMapRef","markersRef","infoRef","filtered","filter","e","byCategory","byArea","byDate","loadKakao","Promise","resolve","reject","window","kakao","maps","appkey","Error","script","document","createElement","src","async","onload","load","onerror","head","appendChild","cancelled","init","center","LatLng","options","level","map","Map","current","handleResize","currentCenter","getCenter","setTimeout","trigger","setCenter","addEventListener","removeEventListener","error","cleanup","forEach","setMap","i","close","length","bounds","LatLngBounds","ev","pos","extend","marker","Marker","position","iwContent","infowindow","InfoWindow","content","addListener","open","push","some","setLevel","setBounds","className","children","fileName","_jsxFileName","lineNumber","columnNumber","c","type","name","value","checked","onChange","onClick","target","a","ref","_c","$RefreshReg$"],"sources":["C:/my-project/seoul-culture/src/pages/Map.jsx"],"sourcesContent":["console.log('KAKAO KEY:', process.env.REACT_APP_KAKAO_MAP_KEY);\r\n\r\n// src/pages/Map.jsx\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\n/* === 상단 필터 옵션 그대로 사용 === */\r\nconst CATEGORIES = [\"공연\", \"전시\", \"교육/체험\", \"기타\"];\r\nconst AREAS = [\"전체\", \"종로구\", \"마포구\", \"서초구\", \"성동구\", \"용산구\"];\r\nconst DATES = [\"전체\", \"오늘\", \"이번 주\", \"이번 달\"];\r\n\r\n/* === 샘플 이벤트 (실제 API 연동 전 임시 표시용) ===\r\n   - Kakao 지도는 위/경도 좌표가 필요해요.\r\n   - 각 구에 임의의 좌표(핵심 랜드마크 주변)를 넣어뒀습니다.\r\n*/\r\nconst SAMPLE_EVENTS = [\r\n  {\r\n    id: 1,\r\n    title: \"서울시립미술관 특별전\",\r\n    category: \"전시\",\r\n    place: \"서울시립미술관 서소문본관\",\r\n    area: \"중구\",\r\n    // 중구는 필터 목록에 없으니 '전체' 선택 시 보이고, 필요하면 AREAS에 '중구' 추가 가능\r\n    lat: 37.5659,\r\n    lng: 126.9753,\r\n    dateStart: \"2025-11-05\",\r\n    dateEnd: \"2025-12-10\",\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"종로 낭독 콘서트\",\r\n    category: \"공연\",\r\n    place: \"종로구민회관\",\r\n    area: \"종로구\",\r\n    lat: 37.5720,\r\n    lng: 126.9813,\r\n    dateStart: \"2025-11-10\",\r\n    dateEnd: \"2025-11-10\",\r\n  },\r\n  {\r\n    id: 3,\r\n    title: \"마포 문화 체험 데이\",\r\n    category: \"교육/체험\",\r\n    place: \"마포 문화비축기지\",\r\n    area: \"마포구\",\r\n    lat: 37.5693,\r\n    lng: 126.8947,\r\n    dateStart: \"2025-11-08\",\r\n    dateEnd: \"2025-11-30\",\r\n  },\r\n  {\r\n    id: 4,\r\n    title: \"서초 가을 클래식\",\r\n    category: \"공연\",\r\n    place: \"예술의전당\",\r\n    area: \"서초구\",\r\n    lat: 37.4799,\r\n    lng: 127.0146,\r\n    dateStart: \"2025-11-15\",\r\n    dateEnd: \"2025-11-15\",\r\n  },\r\n  {\r\n    id: 5,\r\n    title: \"성수 갤러리 기획전\",\r\n    category: \"전시\",\r\n    place: \"성수동 갤러리\",\r\n    area: \"성동구\",\r\n    lat: 37.5435,\r\n    lng: 127.0566,\r\n    dateStart: \"2025-11-01\",\r\n    dateEnd: \"2025-11-30\",\r\n  },\r\n  {\r\n    id: 6,\r\n    title: \"용산 가족 과학 체험\",\r\n    category: \"교육/체험\",\r\n    place: \"국립중앙박물관 어린이박물관\",\r\n    area: \"용산구\",\r\n    lat: 37.5230,\r\n    lng: 126.9800,\r\n    dateStart: \"2025-11-09\",\r\n    dateEnd: \"2025-11-20\",\r\n  },\r\n  {\r\n    id: 7,\r\n    title: \"한강 야시장\",\r\n    category: \"기타\",\r\n    place: \"여의도 한강공원\",\r\n    area: \"영등포구\",\r\n    lat: 37.5271,\r\n    lng: 126.9327,\r\n    dateStart: \"2025-11-01\",\r\n    dateEnd: \"2025-11-30\",\r\n  },\r\n];\r\n\r\n/* 날짜 필터 유틸 */\r\nconst inDateFilter = (event, selected) => {\r\n  if (selected === \"전체\") return true;\r\n  const today = new Date(); // 로컬(Asia/Seoul) 기준\r\n  const start = new Date(event.dateStart + \"T00:00:00\");\r\n  const end = new Date(event.dateEnd + \"T23:59:59\");\r\n\r\n  if (selected === \"오늘\") {\r\n    const y = today.getFullYear();\r\n    const m = today.getMonth();\r\n    const d = today.getDate();\r\n    const todayStart = new Date(y, m, d, 0, 0, 0);\r\n    const todayEnd = new Date(y, m, d, 23, 59, 59);\r\n    return end >= todayStart && start <= todayEnd;\r\n  }\r\n\r\n  if (selected === \"이번 주\") {\r\n    // 월요일 시작, 일요일 끝(한국 기준)\r\n    const day = today.getDay(); // 0:일 ~ 6:토\r\n    const diffToMonday = (day === 0 ? -6 : 1 - day); // 오늘에서 월요일까지의 차이\r\n    const monday = new Date(today);\r\n    monday.setDate(today.getDate() + diffToMonday);\r\n    monday.setHours(0, 0, 0, 0);\r\n\r\n    const sunday = new Date(monday);\r\n    sunday.setDate(monday.getDate() + 6);\r\n    sunday.setHours(23, 59, 59, 999);\r\n\r\n    return end >= monday && start <= sunday;\r\n  }\r\n\r\n  if (selected === \"이번 달\") {\r\n    const y = today.getFullYear();\r\n    const m = today.getMonth();\r\n    const monthStart = new Date(y, m, 1, 0, 0, 0);\r\n    const monthEnd = new Date(y, m + 1, 0, 23, 59, 59);\r\n    return end >= monthStart && start <= monthEnd;\r\n  }\r\n  return true;\r\n};\r\n\r\nexport default function MapPage() {\r\n  const [category, setCategory] = useState(\"\");\r\n  const [area, setArea] = useState(\"전체\");\r\n  const [date, setDate] = useState(\"전체\");\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n\r\n  const mapRef = useRef(null);      // div DOM ref\r\n  const kakaoMapRef = useRef(null); // kakao.maps.Map 인스턴스\r\n  const markersRef = useRef([]);    // 생성한 마커들\r\n  const infoRef = useRef([]);       // 생성한 인포윈도우들\r\n\r\n  /* 필터링된 이벤트 */\r\n  const filtered = useMemo(() => {\r\n    return SAMPLE_EVENTS.filter((e) => {\r\n      const byCategory = category ? e.category === category : true;\r\n      const byArea = area === \"전체\" ? true : e.area === area;\r\n      const byDate = inDateFilter(e, date);\r\n      return byCategory && byArea && byDate;\r\n    });\r\n  }, [category, area, date]);\r\n\r\n  /* Kakao SDK 로더 */\r\n  const loadKakao = () =>\r\n    new Promise((resolve, reject) => {\r\n      if (window.kakao && window.kakao.maps) {\r\n        resolve(window.kakao);\r\n        return;\r\n      }\r\n      const appkey = process.env.REACT_APP_KAKAO_MAP_KEY;\r\n      if (!appkey) {\r\n        reject(\r\n          new Error(\"환경변수 REACT_APP_KAKAO_MAP_KEY 가 설정되어 있지 않습니다.\")\r\n        );\r\n        return;\r\n      }\r\n      const script = document.createElement(\"script\");\r\n      script.src = `https://dapi.kakao.com/v2/maps/sdk.js?appkey=${appkey}&libraries=services&autoload=false`;\r\n      script.async = true;\r\n      script.onload = () => {\r\n        window.kakao.maps.load(() => resolve(window.kakao));\r\n      };\r\n      script.onerror = reject;\r\n      document.head.appendChild(script);\r\n    });\r\n\r\n  /* 지도 초기화 (최초 1회) */\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    const init = async () => {\r\n      try {\r\n        const kakao = await loadKakao();\r\n        if (cancelled) return;\r\n\r\n        const center = new kakao.maps.LatLng(37.5665, 126.9780); // 시청 중심\r\n        const options = { center, level: 7 };\r\n\r\n        const map = new kakao.maps.Map(mapRef.current, options);\r\n        kakaoMapRef.current = map;\r\n\r\n        // 컨테이너 표시 크기 바뀔 때 리사이즈 대응\r\n        const handleResize = () => {\r\n          const map = kakaoMapRef.current;\r\n          if (!map) return;\r\n          const currentCenter = map.getCenter();\r\n          setTimeout(() => {\r\n            kakao.maps.event.trigger(map, \"resize\");\r\n            map.setCenter(currentCenter);\r\n          }, 0);\r\n        };\r\n        window.addEventListener(\"resize\", handleResize);\r\n\r\n        // cleanup\r\n        return () => {\r\n          window.removeEventListener(\"resize\", handleResize);\r\n        };\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    };\r\n\r\n    const cleanup = init();\r\n    return () => {\r\n      cancelled = true;\r\n      if (typeof cleanup === \"function\") cleanup();\r\n    };\r\n  }, []);\r\n\r\n  /* 마커/인포윈도우 렌더링 (필터 변경 시 갱신) */\r\n  useEffect(() => {\r\n    const kakao = window.kakao;\r\n    const map = kakaoMapRef.current;\r\n    if (!kakao || !map) return;\r\n\r\n    // 이전 마커/인포윈도우 제거\r\n    markersRef.current.forEach((m) => m.setMap(null));\r\n    infoRef.current.forEach((i) => i.close());\r\n    markersRef.current = [];\r\n    infoRef.current = [];\r\n\r\n    if (filtered.length === 0) return;\r\n\r\n    // bounds로 화면에 맞게\r\n    const bounds = new kakao.maps.LatLngBounds();\r\n\r\n    filtered.forEach((ev) => {\r\n      const pos = new kakao.maps.LatLng(ev.lat, ev.lng);\r\n      bounds.extend(pos);\r\n\r\n      const marker = new kakao.maps.Marker({\r\n        position: pos,\r\n        map,\r\n        title: ev.title,\r\n      });\r\n\r\n      const iwContent = `\r\n        <div style=\"padding:8px 10px; font-size:12px;\">\r\n          <div style=\"font-weight:600; margin-bottom:4px;\">${ev.title}</div>\r\n          <div style=\"color:#666;\">${ev.place}</div>\r\n          <div style=\"color:#888; margin-top:2px;\">${ev.dateStart} ~ ${ev.dateEnd}</div>\r\n        </div>\r\n      `;\r\n      const infowindow = new kakao.maps.InfoWindow({ content: iwContent });\r\n\r\n      kakao.maps.event.addListener(marker, \"click\", () => {\r\n        // 열려있는 인포윈도우 닫고 클릭한 것만 열기\r\n        infoRef.current.forEach((i) => i.close());\r\n        infowindow.open(map, marker);\r\n        setSelectedEvent({\r\n          id: ev.id,\r\n          title: ev.title,\r\n          place: ev.place,\r\n          date: `${ev.dateStart} ~ ${ev.dateEnd}`,\r\n          area: ev.area,\r\n          category: ev.category,\r\n        });\r\n      });\r\n\r\n      markersRef.current.push(marker);\r\n      infoRef.current.push(infowindow);\r\n    });\r\n\r\n    // 선택된 이벤트가 필터로 사라졌으면 리셋\r\n    if (\r\n      selectedEvent &&\r\n      !filtered.some((e) => e.id === selectedEvent.id)\r\n    ) {\r\n      setSelectedEvent(null);\r\n    }\r\n\r\n    // 마커가 하나면 살짝 확대, 여러 개면 bounds로 맞춤\r\n    if (filtered.length === 1) {\r\n      map.setLevel(5);\r\n      map.setCenter(new kakao.maps.LatLng(filtered[0].lat, filtered[0].lng));\r\n    } else {\r\n      map.setBounds(bounds, 40, 40, 40, 40); // padding\r\n    }\r\n  }, [filtered, selectedEvent]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white px-6 py-8 max-w-7xl mx-auto\">\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\r\n        {/* 왼쪽 필터 영역 */}\r\n        <div className=\"lg:col-span-3\">\r\n          {/* 1. 카테고리 필터 */}\r\n          <h2 className=\"font-semibold mb-2\">카테고리 필터</h2>\r\n          <div className=\"flex flex-col gap-1 mb-6\">\r\n            {CATEGORIES.map((c) => (\r\n              <label key={c} className=\"flex items-center gap-2 text-sm\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"category\"\r\n                  value={c}\r\n                  checked={category === c}\r\n                  onChange={() => setCategory(c)}\r\n                />\r\n                {c}\r\n              </label>\r\n            ))}\r\n            {/* 전체 선택용 해제 버튼 */}\r\n            <button\r\n              onClick={() => setCategory(\"\")}\r\n              className=\"text-xs underline text-gray-600 mt-1 self-start\"\r\n            >\r\n              선택 해제\r\n            </button>\r\n          </div>\r\n\r\n          {/* 2. 지역 */}\r\n          <h2 className=\"font-semibold mb-2\">지역</h2>\r\n          <select\r\n            value={area}\r\n            onChange={(e) => setArea(e.target.value)}\r\n            className=\"border rounded px-2 py-1 w-full mb-6\"\r\n          >\r\n            {AREAS.map((a) => (\r\n              <option key={a} value={a}>\r\n                {a}\r\n              </option>\r\n            ))}\r\n          </select>\r\n\r\n          {/* 3. 날짜 */}\r\n          <h2 className=\"font-semibold mb-2\">날짜</h2>\r\n          <select\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n            className=\"border rounded px-2 py-1 w-full\"\r\n          >\r\n            {DATES.map((d) => (\r\n              <option key={d} value={d}>\r\n                {d}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* 4. 지도 영역 */}\r\n        <div className=\"lg:col-span-6\">\r\n          <div\r\n            ref={mapRef}\r\n            className=\"border rounded-lg w-full aspect-square\"\r\n            // aspect-square로 정사각형. 필요하면 h-[600px] 등 고정 높이로 교체 가능\r\n          />\r\n        </div>\r\n\r\n        {/* 5. 상세 정보 */}\r\n        <div className=\"lg:col-span-3 border rounded-lg p-4 bg-gray-50\">\r\n          {selectedEvent ? (\r\n            <div>\r\n              <div className=\"text-xs inline-flex items-center rounded-full bg-gray-200 px-2 py-0.5 mb-2\">\r\n                {selectedEvent.category} · {selectedEvent.area}\r\n              </div>\r\n              <h3 className=\"font-bold text-lg mb-1\">{selectedEvent.title}</h3>\r\n              <p className=\"text-sm text-gray-600 mb-2\">{selectedEvent.place}</p>\r\n              <p className=\"text-sm text-gray-600\">{selectedEvent.date}</p>\r\n              <button\r\n                className=\"mt-4 text-sm underline text-blue-600\"\r\n                onClick={() => setSelectedEvent(null)}\r\n              >\r\n                선택 해제\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-gray-500 text-sm text-center mt-20\">\r\n              지도의 표시된 행사 중 하나를 클릭하면 상세정보가 여기에 표시됩니다.\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}