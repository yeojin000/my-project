{"ast":null,"code":"var _jsxFileName = \"C:\\\\my-project\\\\seoul-culture\\\\src\\\\pages\\\\Map.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Map.jsx\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\n\n/* === 필터 옵션 === */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CATEGORIES = [\"공연\", \"전시\", \"교육/체험\", \"기타\"];\nconst AREAS = [\"전체\", \"종로구\", \"마포구\", \"서초구\", \"성동구\", \"용산구\"];\nconst DATES = [\"전체\", \"오늘\", \"이번 주\", \"이번 달\"];\n\n/* === 임시 이벤트 데이터 === */\nconst SAMPLE_EVENTS = [{\n  id: 1,\n  title: \"서울시립미술관 특별전\",\n  category: \"전시\",\n  place: \"서울시립미술관 서소문본관\",\n  area: \"중구\",\n  lat: 37.5659,\n  lng: 126.9753,\n  dateStart: \"2025-11-05\",\n  dateEnd: \"2025-12-10\"\n}, {\n  id: 2,\n  title: \"종로 낭독 콘서트\",\n  category: \"공연\",\n  place: \"종로구민회관\",\n  area: \"종로구\",\n  lat: 37.572,\n  lng: 126.9813,\n  dateStart: \"2025-11-10\",\n  dateEnd: \"2025-11-10\"\n}, {\n  id: 3,\n  title: \"마포 문화 체험 데이\",\n  category: \"교육/체험\",\n  place: \"마포 문화비축기지\",\n  area: \"마포구\",\n  lat: 37.5693,\n  lng: 126.8947,\n  dateStart: \"2025-11-08\",\n  dateEnd: \"2025-11-30\"\n}, {\n  id: 4,\n  title: \"서초 가을 클래식\",\n  category: \"공연\",\n  place: \"예술의전당\",\n  area: \"서초구\",\n  lat: 37.4799,\n  lng: 127.0146,\n  dateStart: \"2025-11-15\",\n  dateEnd: \"2025-11-15\"\n}, {\n  id: 5,\n  title: \"성수 갤러리 기획전\",\n  category: \"전시\",\n  place: \"성수동 갤러리\",\n  area: \"성동구\",\n  lat: 37.5435,\n  lng: 127.0566,\n  dateStart: \"2025-11-01\",\n  dateEnd: \"2025-11-30\"\n}, {\n  id: 6,\n  title: \"용산 가족 과학 체험\",\n  category: \"교육/체험\",\n  place: \"국립중앙박물관 어린이박물관\",\n  area: \"용산구\",\n  lat: 37.523,\n  lng: 126.98,\n  dateStart: \"2025-11-09\",\n  dateEnd: \"2025-11-20\"\n}, {\n  id: 7,\n  title: \"한강 야시장\",\n  category: \"기타\",\n  place: \"여의도 한강공원\",\n  area: \"영등포구\",\n  lat: 37.5271,\n  lng: 126.9327,\n  dateStart: \"2025-11-01\",\n  dateEnd: \"2025-11-30\"\n}];\n\n/* 날짜 필터 */\nconst inDateFilter = (event, selected) => {\n  if (selected === \"전체\") return true;\n  const today = new Date();\n  const start = new Date(event.dateStart + \"T00:00:00\");\n  const end = new Date(event.dateEnd + \"T23:59:59\");\n  if (selected === \"오늘\") {\n    const y = today.getFullYear(),\n      m = today.getMonth(),\n      d = today.getDate();\n    const todayStart = new Date(y, m, d, 0, 0, 0);\n    const todayEnd = new Date(y, m, d, 23, 59, 59);\n    return end >= todayStart && start <= todayEnd;\n  }\n  if (selected === \"이번 주\") {\n    const day = today.getDay(); // 0:일~6:토\n    const diffToMonday = day === 0 ? -6 : 1 - day;\n    const monday = new Date(today);\n    monday.setDate(today.getDate() + diffToMonday);\n    monday.setHours(0, 0, 0, 0);\n    const sunday = new Date(monday);\n    sunday.setDate(monday.getDate() + 6);\n    sunday.setHours(23, 59, 59, 999);\n    return end >= monday && start <= sunday;\n  }\n  if (selected === \"이번 달\") {\n    const y = today.getFullYear(),\n      m = today.getMonth();\n    const monthStart = new Date(y, m, 1, 0, 0, 0);\n    const monthEnd = new Date(y, m + 1, 0, 23, 59, 59);\n    return end >= monthStart && start <= monthEnd;\n  }\n  return true;\n};\n\n/* Kakao SDK 로더 (중복 주입 방지) */\nconst loadKakao = () => new Promise((resolve, reject) => {\n  if (window.kakao && window.kakao.maps) {\n    resolve(window.kakao);\n    return;\n  }\n  const appkey = process.env.REACT_APP_KAKAO_MAP_KEY;\n  if (!appkey) {\n    const err = new Error(\"환경변수 REACT_APP_KAKAO_MAP_KEY 가 설정되어 있지 않습니다.\");\n    console.error(err);\n    alert(err.message);\n    reject(err);\n    return;\n  }\n  const EXISTING_ID = \"kakao-maps-sdk\";\n  const exist = document.getElementById(EXISTING_ID);\n  if (exist) {\n    // 이미 로드 시도한 스크립트 재사용\n    exist.addEventListener(\"load\", () => {\n      if (window.kakao && window.kakao.maps) resolve(window.kakao);else reject(new Error(\"Kakao SDK loaded but window.kakao.maps undefined\"));\n    });\n    exist.addEventListener(\"error\", e => reject(e));\n    return;\n  }\n  const script = document.createElement(\"script\");\n  script.id = EXISTING_ID;\n  script.src = `https://dapi.kakao.com/v2/maps/sdk.js?appkey=${appkey}&libraries=services&autoload=false`;\n  script.async = true;\n  script.onload = () => {\n    try {\n      window.kakao.maps.load(() => resolve(window.kakao));\n    } catch (e) {\n      console.error(\"kakao.maps.load() 실패:\", e);\n      alert(\"kakao.maps.load() 실패\");\n      reject(e);\n    }\n  };\n  script.onerror = e => {\n    console.error(\"Kakao Maps SDK 로드 실패:\", e, \"\\n요청 URL:\", script.src);\n    alert(\"Kakao Maps SDK 로드 실패\\n\\n\" + `요청 URL: ${script.src}\\n` + \"1) JavaScript 키 맞는지\\n\" + \"2) 도메인 화이트리스트 등록(프로토콜/포트 포함) 했는지\\n\" + \"3) 애드블록/보안 확장 끄기\\n\" + \"를 확인하세요. Network 탭에서 상태코드도 확인!\");\n    reject(e);\n  };\n  document.head.appendChild(script);\n});\nexport default function MapPage() {\n  _s();\n  const [category, setCategory] = useState(\"\");\n  const [area, setArea] = useState(\"전체\");\n  const [date, setDate] = useState(\"전체\");\n  const [selectedEvent, setSelectedEvent] = useState(null);\n  const mapRef = useRef(null); // 지도 div\n  const kakaoMapRef = useRef(null); // kakao.maps.Map\n  const markersRef = useRef([]); // 마커\n  const infoRef = useRef([]); // 인포윈도우\n\n  const filtered = useMemo(() => {\n    return SAMPLE_EVENTS.filter(e => {\n      const byCategory = category ? e.category === category : true;\n      const byArea = area === \"전체\" ? true : e.area === area;\n      const byDate = inDateFilter(e, date);\n      return byCategory && byArea && byDate;\n    });\n  }, [category, area, date]);\n\n  /* 지도 초기화 (최초 1회) */\n  useEffect(() => {\n    let disposed = false;\n    let resizeHandler = null;\n    (async () => {\n      try {\n        const kakao = await loadKakao();\n        if (disposed) return;\n        const center = new kakao.maps.LatLng(37.5665, 126.9780); // 서울시청\n        const options = {\n          center,\n          level: 7\n        };\n        const map = new kakao.maps.Map(mapRef.current, options);\n        kakaoMapRef.current = map;\n\n        // 리사이즈 대응\n        resizeHandler = () => {\n          const m = kakaoMapRef.current;\n          if (!m) return;\n          const currentCenter = m.getCenter();\n          // 레이아웃 변화 직후 리사이즈\n          setTimeout(() => {\n            kakao.maps.event.trigger(m, \"resize\");\n            m.setCenter(currentCenter);\n          }, 0);\n        };\n        window.addEventListener(\"resize\", resizeHandler);\n      } catch (e) {\n        console.error(e);\n      }\n    })();\n\n    // ✅ useEffect의 정식 cleanup\n    return () => {\n      disposed = true;\n      if (resizeHandler) window.removeEventListener(\"resize\", resizeHandler);\n    };\n  }, []);\n\n  /* 마커/인포윈도우 렌더링 (필터 변경 시 갱신) */\n  useEffect(() => {\n    const kakao = window.kakao;\n    const map = kakaoMapRef.current;\n    if (!kakao || !map) return;\n\n    // 기존 정리\n    markersRef.current.forEach(m => m.setMap(null));\n    infoRef.current.forEach(i => i.close());\n    markersRef.current = [];\n    infoRef.current = [];\n    if (filtered.length === 0) return;\n    const bounds = new kakao.maps.LatLngBounds();\n    filtered.forEach(ev => {\n      const pos = new kakao.maps.LatLng(ev.lat, ev.lng);\n      bounds.extend(pos);\n      const marker = new kakao.maps.Marker({\n        position: pos,\n        map,\n        title: ev.title\n      });\n      const iwContent = `\n        <div style=\"padding:8px 10px; font-size:12px;\">\n          <div style=\"font-weight:600; margin-bottom:4px;\">${ev.title}</div>\n          <div style=\"color:#666;\">${ev.place}</div>\n          <div style=\"color:#888; margin-top:2px;\">${ev.dateStart} ~ ${ev.dateEnd}</div>\n        </div>\n      `;\n      const infowindow = new kakao.maps.InfoWindow({\n        content: iwContent\n      });\n      kakao.maps.event.addListener(marker, \"click\", () => {\n        infoRef.current.forEach(i => i.close());\n        infowindow.open(map, marker);\n        setSelectedEvent({\n          id: ev.id,\n          title: ev.title,\n          place: ev.place,\n          date: `${ev.dateStart} ~ ${ev.dateEnd}`,\n          area: ev.area,\n          category: ev.category\n        });\n      });\n      markersRef.current.push(marker);\n      infoRef.current.push(infowindow);\n    });\n    if (selectedEvent && !filtered.some(e => e.id === selectedEvent.id)) {\n      setSelectedEvent(null);\n    }\n    if (filtered.length === 1) {\n      map.setLevel(5);\n      map.setCenter(new kakao.maps.LatLng(filtered[0].lat, filtered[0].lng));\n    } else {\n      map.setBounds(bounds, 40, 40, 40, 40);\n    }\n  }, [filtered, selectedEvent]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-white px-6 py-8 max-w-7xl mx-auto\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-12 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold mb-2\",\n          children: \"\\uCE74\\uD14C\\uACE0\\uB9AC \\uD544\\uD130\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col gap-1 mb-6\",\n          children: [CATEGORIES.map(c => /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"flex items-center gap-2 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"category\",\n              value: c,\n              checked: category === c,\n              onChange: () => setCategory(c)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this), c]\n          }, c, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setCategory(\"\"),\n            className: \"text-xs underline text-gray-600 mt-1 self-start\",\n            children: \"\\uC120\\uD0DD \\uD574\\uC81C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold mb-2\",\n          children: \"\\uC9C0\\uC5ED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: area,\n          onChange: e => setArea(e.target.value),\n          className: \"border rounded px-2 py-1 w-full mb-6\",\n          children: AREAS.map(a => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: a,\n            children: a\n          }, a, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"font-semibold mb-2\",\n          children: \"\\uB0A0\\uC9DC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: date,\n          onChange: e => setDate(e.target.value),\n          className: \"border rounded px-2 py-1 w-full\",\n          children: DATES.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: d,\n            children: d\n          }, d, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: mapRef,\n          className: \"border rounded-lg w-full\",\n          style: {\n            height: 600\n          } // 확실한 높이\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-3 border rounded-lg p-4 bg-gray-50\",\n        children: selectedEvent ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs inline-flex items-center rounded-full bg-gray-200 px-2 py-0.5 mb-2\",\n            children: [selectedEvent.category, \" \\xB7 \", selectedEvent.area]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-bold text-lg mb-1\",\n            children: selectedEvent.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mb-2\",\n            children: selectedEvent.place\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600\",\n            children: selectedEvent.date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"mt-4 text-sm underline text-blue-600\",\n            onClick: () => setSelectedEvent(null),\n            children: \"\\uC120\\uD0DD \\uD574\\uC81C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-500 text-sm text-center mt-20\",\n          children: \"\\uC9C0\\uB3C4\\uC758 \\uD45C\\uC2DC\\uB41C \\uD589\\uC0AC \\uC911 \\uD558\\uB098\\uB97C \\uD074\\uB9AD\\uD558\\uBA74 \\uC0C1\\uC138\\uC815\\uBCF4\\uAC00 \\uC5EC\\uAE30\\uC5D0 \\uD45C\\uC2DC\\uB429\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this);\n}\n_s(MapPage, \"FCkUEJaiRb8CNENWTTeBiYGwZL0=\");\n_c = MapPage;\nvar _c;\n$RefreshReg$(_c, \"MapPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","jsxDEV","_jsxDEV","CATEGORIES","AREAS","DATES","SAMPLE_EVENTS","id","title","category","place","area","lat","lng","dateStart","dateEnd","inDateFilter","event","selected","today","Date","start","end","y","getFullYear","m","getMonth","d","getDate","todayStart","todayEnd","day","getDay","diffToMonday","monday","setDate","setHours","sunday","monthStart","monthEnd","loadKakao","Promise","resolve","reject","window","kakao","maps","appkey","process","env","REACT_APP_KAKAO_MAP_KEY","err","Error","console","error","alert","message","EXISTING_ID","exist","document","getElementById","addEventListener","e","script","createElement","src","async","onload","load","onerror","head","appendChild","MapPage","_s","setCategory","setArea","date","selectedEvent","setSelectedEvent","mapRef","kakaoMapRef","markersRef","infoRef","filtered","filter","byCategory","byArea","byDate","disposed","resizeHandler","center","LatLng","options","level","map","Map","current","currentCenter","getCenter","setTimeout","trigger","setCenter","removeEventListener","forEach","setMap","i","close","length","bounds","LatLngBounds","ev","pos","extend","marker","Marker","position","iwContent","infowindow","InfoWindow","content","addListener","open","push","some","setLevel","setBounds","className","children","fileName","_jsxFileName","lineNumber","columnNumber","c","type","name","value","checked","onChange","onClick","target","a","ref","style","height","_c","$RefreshReg$"],"sources":["C:/my-project/seoul-culture/src/pages/Map.jsx"],"sourcesContent":["// src/pages/Map.jsx\r\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\r\n\r\n/* === 필터 옵션 === */\r\nconst CATEGORIES = [\"공연\", \"전시\", \"교육/체험\", \"기타\"];\r\nconst AREAS = [\"전체\", \"종로구\", \"마포구\", \"서초구\", \"성동구\", \"용산구\"];\r\nconst DATES = [\"전체\", \"오늘\", \"이번 주\", \"이번 달\"];\r\n\r\n/* === 임시 이벤트 데이터 === */\r\nconst SAMPLE_EVENTS = [\r\n  { id: 1, title: \"서울시립미술관 특별전\", category: \"전시\", place: \"서울시립미술관 서소문본관\", area: \"중구\", lat: 37.5659, lng: 126.9753, dateStart: \"2025-11-05\", dateEnd: \"2025-12-10\" },\r\n  { id: 2, title: \"종로 낭독 콘서트\", category: \"공연\", place: \"종로구민회관\", area: \"종로구\", lat: 37.572, lng: 126.9813, dateStart: \"2025-11-10\", dateEnd: \"2025-11-10\" },\r\n  { id: 3, title: \"마포 문화 체험 데이\", category: \"교육/체험\", place: \"마포 문화비축기지\", area: \"마포구\", lat: 37.5693, lng: 126.8947, dateStart: \"2025-11-08\", dateEnd: \"2025-11-30\" },\r\n  { id: 4, title: \"서초 가을 클래식\", category: \"공연\", place: \"예술의전당\", area: \"서초구\", lat: 37.4799, lng: 127.0146, dateStart: \"2025-11-15\", dateEnd: \"2025-11-15\" },\r\n  { id: 5, title: \"성수 갤러리 기획전\", category: \"전시\", place: \"성수동 갤러리\", area: \"성동구\", lat: 37.5435, lng: 127.0566, dateStart: \"2025-11-01\", dateEnd: \"2025-11-30\" },\r\n  { id: 6, title: \"용산 가족 과학 체험\", category: \"교육/체험\", place: \"국립중앙박물관 어린이박물관\", area: \"용산구\", lat: 37.523, lng: 126.98, dateStart: \"2025-11-09\", dateEnd: \"2025-11-20\" },\r\n  { id: 7, title: \"한강 야시장\", category: \"기타\", place: \"여의도 한강공원\", area: \"영등포구\", lat: 37.5271, lng: 126.9327, dateStart: \"2025-11-01\", dateEnd: \"2025-11-30\" },\r\n];\r\n\r\n/* 날짜 필터 */\r\nconst inDateFilter = (event, selected) => {\r\n  if (selected === \"전체\") return true;\r\n  const today = new Date();\r\n  const start = new Date(event.dateStart + \"T00:00:00\");\r\n  const end = new Date(event.dateEnd + \"T23:59:59\");\r\n\r\n  if (selected === \"오늘\") {\r\n    const y = today.getFullYear(), m = today.getMonth(), d = today.getDate();\r\n    const todayStart = new Date(y, m, d, 0, 0, 0);\r\n    const todayEnd = new Date(y, m, d, 23, 59, 59);\r\n    return end >= todayStart && start <= todayEnd;\r\n  }\r\n  if (selected === \"이번 주\") {\r\n    const day = today.getDay(); // 0:일~6:토\r\n    const diffToMonday = day === 0 ? -6 : 1 - day;\r\n    const monday = new Date(today);\r\n    monday.setDate(today.getDate() + diffToMonday);\r\n    monday.setHours(0, 0, 0, 0);\r\n    const sunday = new Date(monday);\r\n    sunday.setDate(monday.getDate() + 6);\r\n    sunday.setHours(23, 59, 59, 999);\r\n    return end >= monday && start <= sunday;\r\n  }\r\n  if (selected === \"이번 달\") {\r\n    const y = today.getFullYear(), m = today.getMonth();\r\n    const monthStart = new Date(y, m, 1, 0, 0, 0);\r\n    const monthEnd = new Date(y, m + 1, 0, 23, 59, 59);\r\n    return end >= monthStart && start <= monthEnd;\r\n  }\r\n  return true;\r\n};\r\n\r\n/* Kakao SDK 로더 (중복 주입 방지) */\r\nconst loadKakao = () =>\r\n  new Promise((resolve, reject) => {\r\n    if (window.kakao && window.kakao.maps) {\r\n      resolve(window.kakao);\r\n      return;\r\n    }\r\n    const appkey = process.env.REACT_APP_KAKAO_MAP_KEY;\r\n    if (!appkey) {\r\n      const err = new Error(\"환경변수 REACT_APP_KAKAO_MAP_KEY 가 설정되어 있지 않습니다.\");\r\n      console.error(err);\r\n      alert(err.message);\r\n      reject(err);\r\n      return;\r\n    }\r\n\r\n    const EXISTING_ID = \"kakao-maps-sdk\";\r\n    const exist = document.getElementById(EXISTING_ID);\r\n    if (exist) {\r\n      // 이미 로드 시도한 스크립트 재사용\r\n      exist.addEventListener(\"load\", () => {\r\n        if (window.kakao && window.kakao.maps) resolve(window.kakao);\r\n        else reject(new Error(\"Kakao SDK loaded but window.kakao.maps undefined\"));\r\n      });\r\n      exist.addEventListener(\"error\", (e) => reject(e));\r\n      return;\r\n    }\r\n\r\n    const script = document.createElement(\"script\");\r\n    script.id = EXISTING_ID;\r\n    script.src = `https://dapi.kakao.com/v2/maps/sdk.js?appkey=${appkey}&libraries=services&autoload=false`;\r\n    script.async = true;\r\n    script.onload = () => {\r\n      try {\r\n        window.kakao.maps.load(() => resolve(window.kakao));\r\n      } catch (e) {\r\n        console.error(\"kakao.maps.load() 실패:\", e);\r\n        alert(\"kakao.maps.load() 실패\");\r\n        reject(e);\r\n      }\r\n    };\r\n    script.onerror = (e) => {\r\n      console.error(\"Kakao Maps SDK 로드 실패:\", e, \"\\n요청 URL:\", script.src);\r\n      alert(\r\n        \"Kakao Maps SDK 로드 실패\\n\\n\" +\r\n        `요청 URL: ${script.src}\\n` +\r\n        \"1) JavaScript 키 맞는지\\n\" +\r\n        \"2) 도메인 화이트리스트 등록(프로토콜/포트 포함) 했는지\\n\" +\r\n        \"3) 애드블록/보안 확장 끄기\\n\" +\r\n        \"를 확인하세요. Network 탭에서 상태코드도 확인!\"\r\n      );\r\n      reject(e);\r\n    };\r\n    document.head.appendChild(script);\r\n  });\r\n\r\nexport default function MapPage() {\r\n  const [category, setCategory] = useState(\"\");\r\n  const [area, setArea] = useState(\"전체\");\r\n  const [date, setDate] = useState(\"전체\");\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n\r\n  const mapRef = useRef(null);         // 지도 div\r\n  const kakaoMapRef = useRef(null);    // kakao.maps.Map\r\n  const markersRef = useRef([]);       // 마커\r\n  const infoRef = useRef([]);          // 인포윈도우\r\n\r\n  const filtered = useMemo(() => {\r\n    return SAMPLE_EVENTS.filter((e) => {\r\n      const byCategory = category ? e.category === category : true;\r\n      const byArea = area === \"전체\" ? true : e.area === area;\r\n      const byDate = inDateFilter(e, date);\r\n      return byCategory && byArea && byDate;\r\n    });\r\n  }, [category, area, date]);\r\n\r\n  /* 지도 초기화 (최초 1회) */\r\n  useEffect(() => {\r\n    let disposed = false;\r\n    let resizeHandler = null;\r\n\r\n    (async () => {\r\n      try {\r\n        const kakao = await loadKakao();\r\n        if (disposed) return;\r\n\r\n        const center = new kakao.maps.LatLng(37.5665, 126.9780); // 서울시청\r\n        const options = { center, level: 7 };\r\n        const map = new kakao.maps.Map(mapRef.current, options);\r\n        kakaoMapRef.current = map;\r\n\r\n        // 리사이즈 대응\r\n        resizeHandler = () => {\r\n          const m = kakaoMapRef.current;\r\n          if (!m) return;\r\n          const currentCenter = m.getCenter();\r\n          // 레이아웃 변화 직후 리사이즈\r\n          setTimeout(() => {\r\n            kakao.maps.event.trigger(m, \"resize\");\r\n            m.setCenter(currentCenter);\r\n          }, 0);\r\n        };\r\n        window.addEventListener(\"resize\", resizeHandler);\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    })();\r\n\r\n    // ✅ useEffect의 정식 cleanup\r\n    return () => {\r\n      disposed = true;\r\n      if (resizeHandler) window.removeEventListener(\"resize\", resizeHandler);\r\n    };\r\n  }, []);\r\n\r\n  /* 마커/인포윈도우 렌더링 (필터 변경 시 갱신) */\r\n  useEffect(() => {\r\n    const kakao = window.kakao;\r\n    const map = kakaoMapRef.current;\r\n    if (!kakao || !map) return;\r\n\r\n    // 기존 정리\r\n    markersRef.current.forEach((m) => m.setMap(null));\r\n    infoRef.current.forEach((i) => i.close());\r\n    markersRef.current = [];\r\n    infoRef.current = [];\r\n\r\n    if (filtered.length === 0) return;\r\n\r\n    const bounds = new kakao.maps.LatLngBounds();\r\n\r\n    filtered.forEach((ev) => {\r\n      const pos = new kakao.maps.LatLng(ev.lat, ev.lng);\r\n      bounds.extend(pos);\r\n\r\n      const marker = new kakao.maps.Marker({ position: pos, map, title: ev.title });\r\n\r\n      const iwContent = `\r\n        <div style=\"padding:8px 10px; font-size:12px;\">\r\n          <div style=\"font-weight:600; margin-bottom:4px;\">${ev.title}</div>\r\n          <div style=\"color:#666;\">${ev.place}</div>\r\n          <div style=\"color:#888; margin-top:2px;\">${ev.dateStart} ~ ${ev.dateEnd}</div>\r\n        </div>\r\n      `;\r\n      const infowindow = new kakao.maps.InfoWindow({ content: iwContent });\r\n\r\n      kakao.maps.event.addListener(marker, \"click\", () => {\r\n        infoRef.current.forEach((i) => i.close());\r\n        infowindow.open(map, marker);\r\n        setSelectedEvent({\r\n          id: ev.id,\r\n          title: ev.title,\r\n          place: ev.place,\r\n          date: `${ev.dateStart} ~ ${ev.dateEnd}`,\r\n          area: ev.area,\r\n          category: ev.category,\r\n        });\r\n      });\r\n\r\n      markersRef.current.push(marker);\r\n      infoRef.current.push(infowindow);\r\n    });\r\n\r\n    if (selectedEvent && !filtered.some((e) => e.id === selectedEvent.id)) {\r\n      setSelectedEvent(null);\r\n    }\r\n\r\n    if (filtered.length === 1) {\r\n      map.setLevel(5);\r\n      map.setCenter(new kakao.maps.LatLng(filtered[0].lat, filtered[0].lng));\r\n    } else {\r\n      map.setBounds(bounds, 40, 40, 40, 40);\r\n    }\r\n  }, [filtered, selectedEvent]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white px-6 py-8 max-w-7xl mx-auto\">\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6\">\r\n        {/* 왼쪽 필터 */}\r\n        <div className=\"lg:col-span-3\">\r\n          <h2 className=\"font-semibold mb-2\">카테고리 필터</h2>\r\n          <div className=\"flex flex-col gap-1 mb-6\">\r\n            {CATEGORIES.map((c) => (\r\n              <label key={c} className=\"flex items-center gap-2 text-sm\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"category\"\r\n                  value={c}\r\n                  checked={category === c}\r\n                  onChange={() => setCategory(c)}\r\n                />\r\n                {c}\r\n              </label>\r\n            ))}\r\n            <button\r\n              onClick={() => setCategory(\"\")}\r\n              className=\"text-xs underline text-gray-600 mt-1 self-start\"\r\n            >\r\n              선택 해제\r\n            </button>\r\n          </div>\r\n\r\n          <h2 className=\"font-semibold mb-2\">지역</h2>\r\n          <select\r\n            value={area}\r\n            onChange={(e) => setArea(e.target.value)}\r\n            className=\"border rounded px-2 py-1 w-full mb-6\"\r\n          >\r\n            {AREAS.map((a) => (\r\n              <option key={a} value={a}>{a}</option>\r\n            ))}\r\n          </select>\r\n\r\n          <h2 className=\"font-semibold mb-2\">날짜</h2>\r\n          <select\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n            className=\"border rounded px-2 py-1 w-full\"\r\n          >\r\n            {DATES.map((d) => (\r\n              <option key={d} value={d}>{d}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* 지도 영역 */}\r\n        <div className=\"lg:col-span-6\">\r\n          <div\r\n            ref={mapRef}\r\n            className=\"border rounded-lg w-full\"\r\n            style={{ height: 600 }} // 확실한 높이\r\n          />\r\n        </div>\r\n\r\n        {/* 상세 정보 */}\r\n        <div className=\"lg:col-span-3 border rounded-lg p-4 bg-gray-50\">\r\n          {selectedEvent ? (\r\n            <div>\r\n              <div className=\"text-xs inline-flex items-center rounded-full bg-gray-200 px-2 py-0.5 mb-2\">\r\n                {selectedEvent.category} · {selectedEvent.area}\r\n              </div>\r\n              <h3 className=\"font-bold text-lg mb-1\">{selectedEvent.title}</h3>\r\n              <p className=\"text-sm text-gray-600 mb-2\">{selectedEvent.place}</p>\r\n              <p className=\"text-sm text-gray-600\">{selectedEvent.date}</p>\r\n              <button className=\"mt-4 text-sm underline text-blue-600\" onClick={() => setSelectedEvent(null)}>\r\n                선택 해제\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-gray-500 text-sm text-center mt-20\">\r\n              지도의 표시된 행사 중 하나를 클릭하면 상세정보가 여기에 표시됩니다.\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}